<!DOCTYPE html>
<html>
<head>
  <style type="text/css"> 
    #myCanvas{
      border:1px solid #000000;
      margin-left: auto;
      margin-right: auto;
      display: block;
    }
  </style>
<body>

<canvas id="myCanvas" width="640" height="480" style="">
  Your browser does not support the HTML5 canvas tag.
</canvas>

<script>
  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  function norm(p,lo,hi)
    {return Math.floor((p-lo)/(hi-lo)*255);}
  
  var x,y,t=0;
  var lev;
  var k=0.1,w=0.1;
  var h=3.0;
  var xs,ys;
  var xv,yv;
  var HEIGHT = 480, WIDTH = 640;
  var cos = Math.cos, sin = Math.sin;
  for(y=0;y<HEIGHT;y++)
    for(x=0;x<WIDTH;x++){
      xs=x/WIDTH*2.0-1.0;
      ys=y/HEIGHT*2.0-1.0;
      h=3.0+3.0*cos(0.1*t);
      xv=h*xs/ys;yv=h/ys;
      if(ys>0) lev=norm(sin(xv*cos(w*t)-yv*sin(w*t))                      
                   *sin(xv*sin(w*t)+yv*cos(w*t)),-1.0,1.0);
      else{lev=0;}
      ctx.fillStyle='rgb('+lev+','+lev+','+lev+')';
      ctx.fillRect(x, y, 1, 1);
    }
</script>
</body>
</html>

